{% load custom_tags %}

<thead>
  <tr>
    <th scope="col" style="width:1em">ID</th>
    <th scope="col" style="width:8em">Cliente</th>
    <th scope="col" style="width:8em">Código</th>
    <th scope="col" style="width:1em;text-align:center;">T.</th>
    <th scope="col" style="width:19em">Dirección</th>
    <th scope="col" style="width:11em">Tasador</th>
    <!--<th scope="col">Fecha creación</th>-->
    <th scope="col" style="width:11em">Entregada</th>
    <th scope="col" style="width:17em"></th>
    <th scope="col" style="width:5em"></th>
  </tr>
</thead>
<tbody>
  {% for appraisal in appraisals_finished %}
  <tr class="finished {{appraisal.tasadorUser.id}}" id="app2-{{appraisal.tasadorUser.id}}">
    <td class="id">
      {{ appraisal.id }}
    </td>
    <td class="solicitante">
      {{ appraisal.solicitanteVerbose }}
    </td>
    <td class="solicitanteCodigo">
      {{ appraisal.solicitanteCodigo }}
    </td>
    <td style="text-align:center;">
      <i class="{{ appraisal.real_estates.first.get_propertyTypeIcon }}"></i>
    </td>
    <td class="address">
      <a href={{appraisal.url}}>
        {{ appraisal.address_no_region }}
      </a>
    </td>
    <td>
      <span style="vertical-align: middle;" class="tasador">
        {% if appraisal.tasadorUser %}
          {{ appraisal.tasadorUser.first_name.0 }}. {{ appraisal.tasadorUser.last_name }}
        {% else %}
        -
        {% endif %}
      </span>
    </td>
    <!--
    <td>
      {{appraisal.timeCreated | date:"D d M, H:i"}}
    </td>
    -->
    <td>
      {{appraisal.timeFinished | date:"d/m/Y G:i" }}
    </td>
    <td>
    </td>
    <td style="text-align:right;">
      {% include 'main/btn_logbook.html' %}
      {% if perms.appraisal.assign_visador %}
      <button type="button" id="{{appraisal.tasadorUser.id}}" 
              value="{{appraisal.id}}"
              class="btn btn-dark btn-sm btn-evaluate evaluateAppraisal"
              data-toggle="modal"
              data-target="#evaluateAppraisal" 
              data-ontime="{{appraisal.appraisalevaluation.onTime}}"
              data-completeness="{{appraisal.appraisalevaluation.completeness}}"
              data-correctsurface = "{{appraisal.appraisalevaluation.correctSurface}}"
              data-completenormative = "{{appraisal.appraisalevaluation.completeNormative}}"
              data-homologatedreferences = "{{appraisal.appraisalevaluation.homologatedReferences}}"
              data-commenttext="{{appraisal.appraisalevaluation.commentText}}"
              data-generalquality="{{appraisal.appraisalevaluation.generalQuality}}"
              data-commentfeedback="{{appraisal.appraisalevaluation.commentFeedback}}"
              style="font-family:Material Icons;font-size:1.0em;margin-bottom:1px;border:0px;">
        assessment
      </button>
    </td>
    {% endif %}
  </tr>
  {% endfor %}
</tbody>